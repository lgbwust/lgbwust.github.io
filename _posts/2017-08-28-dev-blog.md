---
layout: post
title: 微服务开发实战总结
categories: [java,js]
tags: code
---

> 最坑的，莫过于偷偷在代码里下毒

最近开始上手微服务的项目了，可以说什么都不会啊，架子都是别人搭好了的，前段时间写了一部分的api接口，其实也是照着别人的代码copy的。由于人手不够，写完后台API，强行进入前端UI开发的工作了。同样是啥都不会，同样是抄的别人的代码来改，在实际开发中，我遇到了一些比较坑人的问题，记录下来，以备后用。

> post请求出现403错误

### 后台接口问题

这个问题困扰了我一个下午，明明写的都是对的，为什么总是报403错误呢，线上测不行，改用postman测接口，也不行，重启项目网关，还是不行。想了半天也不知道哪里出错了。请求的方法不匹配可能会出现这个错误，但是我检查了好多次，还是不行。

整半天也没解决，最后我找开swagger看一下接口，结果发现问题了。问题就出在接口上，****定义api接口出现冲突了***。改了一下后台接口，再测果然就好了。我就不明白了，为啥别人要写一个空白接口，还跟前一个功能模块的接口出现重复。这么隐秘的错误，真是让人防不胜防啊！最后多说一句，api一定不能重复！

> JSON数据可以得到，却取不出值

### JSON问题

这个诡异的问题，又折腾了我一个上午的时间。都是对的，json数据也能够取到，可就是访问不了里面的数取。得到的json格式如下：

```
{
   "status" : 200,
   "message": "msg"
}
```
可以得到result, 正常输出，可是`result.status`却是undefined....这就很无语了。又是试了半天，想不通为啥会出现这么一个情况，看了下别人写的代码，可以取数据啊。最后没有办法，只能一步的调试，或者删了重新写。直到最后，我把下面的一段代码去掉之后，终于正常了！
```
xhr => $q.errorAction(xhr), true);
```
我就想知道，为啥会出现这么一种情况呢？？？
